<div class="px-10 py-10 pt-3">
<h2 class="text-2xl font-bold text-gray-800 mb-3 justify-center flex">All Orders</h2>

<div *ngFor="let order of orders" class="mb-6 border rounded-lg p-2 shadow-sm pr-5 pl-5">
  
<div class="bg-gray-50 border border-gray-200 rounded-md p-4 mb-4 shadow-sm">

  <div class="flex justify-between items-start flex-wrap">

    <div class="space-y-1 text-sm text-gray-700">
      <div>
        <span class="font-semibold text-gray-800">ðŸ§¾ Order ID: </span>
        <span class="text-violet-600 font-medium tracking-wide">{{ order._id }}</span>
      </div>
      <div>
        <span class="font-semibold text-gray-800">ðŸ“… Date: </span>
        <span class="text-gray-700">{{ order.date | date: 'mediumDate' }}</span>
      </div>
    </div>

    <div class="text-sm text-right space-y-1 mt-2 sm:mt-0">
    <div>
<mat-button-toggle-group
  appearance="legacy"
  name="orderStatus"
  class="status-toggle-group"
  [value]="order.status?.toLowerCase()"
  (change)="updateStatus(order._id!, $event)"
>
  <mat-button-toggle
    value="dispatched"
    [ngClass]="{ 'text-yellow-800 border-yellow-300': order.status?.toLowerCase() === 'dispatched' }"
  >
    Dispatched
  </mat-button-toggle>

  <mat-button-toggle
    value="shipped"
    [ngClass]="{ 'text-green-800 border-green-300': order.status?.toLowerCase() === 'shipped' }"
  >
    Shipped
  </mat-button-toggle>

  <mat-button-toggle
    value="delivered"
    [ngClass]="{ 'text-red-800 border-red-300': order.status?.toLowerCase() === 'delivered' }"
  >
    Delivered
  </mat-button-toggle>
</mat-button-toggle-group>


      </div>

      <div>
        <span class="font-semibold text-gray-800">ðŸ’µ Payment: </span>
        <span class="text-gray-700">{{ order.paymentType | titlecase }}</span>
      </div>
    </div>
  </div>
</div>

  <div *ngFor="let item of order.items" class="flex items-center justify-between border-b mb-2">
    
    <div class="flex items-center space-x-4">
      <img [src]="item.productId.images[0].image" class="w-16 h-16 rounded object-contain shadow" />
      <div>
        <p class="text-gray-800 font-semibold text-sm md:text-base">{{ item.productId.name }}</p>
        <div class="flex items-center space-x-3 text-sm text-gray-600 mt-1">
          <span><strong>Qty:</strong> {{ item.quantity }}</span>
          <div class="flex items-center space-x-2 text-xs md:text-sm">
            <span class="line-through text-gray-400">â‚¹{{ item.productId.price }}</span>
            <span class="text-red-500 font-semibold">-{{ item.productId.discount }}%</span>
            <span class="text-green-600 font-semibold">
              â‚¹{{ getDiscountedPrice(item.productId.price, item.productId.discount) }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <div class="text-right">
      <p class="text-sm text-gray-500">Total</p>
      <p class="text-violet-600 font-bold text-lg">
        â‚¹{{ getDiscountedPrice(item.productId.price, item.productId.discount) * item.quantity }}
      </p>
    </div>
  </div>

</div>
</div>